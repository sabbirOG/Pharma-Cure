/**
 * Language management for bilingual support (English & Bangla)
 */

const language = {
    currentLang: 'en',
    
    translations: {
        en: {
            'app-title': 'PharmaCure',
            'nav-home': 'Home',
            'nav-medicine': 'Medicine Corner',
            'nav-doctor': 'Doctor Corner',
            'nav-profile': 'Profile',
            'btn-logout': 'Logout',
            'welcome-title': 'Welcome to PharmaCure',
            'welcome-desc': 'Your trusted pharmacy for quality medicines and healthcare services',
            'action-medicine': 'Browse Medicines',
            'action-medicine-desc': 'Search and order medicines',
            'action-doctor': 'Book Appointment',
            'action-doctor-desc': 'Schedule with our doctors',
            'action-profile': 'My Profile',
            'action-profile-desc': 'Manage your account',
            'recent-activity': 'Recent Activity',
            'no-activity': 'No recent activity',
            'footer-text': '© 2024 PharmaCure. All rights reserved.',
            'login-title': 'Login to Your Account',
            'signup-title': 'Create Your Account',
            'label-name': 'Full Name',
            'label-phone': 'Phone Number',
            'label-password': 'Password',
            'label-confirm-password': 'Confirm Password',
            'label-age': 'Age',
            'label-address': 'Address',
            'btn-login': 'Login',
            'btn-signup': 'Sign Up',
            'no-account': "Don't have an account?",
            'have-account': 'Already have an account?',
            'link-signup': 'Sign up here',
            'link-login': 'Login here',
            'demo-title': 'Demo Credentials',
            'demo-admin': 'Admin:',
            'demo-customer': 'Customer:',
            'demo-customer-desc': 'Create account or use any phone/password',
            'medicine-title': 'Medicine Corner',
            'medicine-desc': 'Browse and search for medicines',
            'search-placeholder': 'Search medicines...',
            'btn-search': 'Search',
            'filter-all-categories': 'All Categories',
            'category-pain': 'Pain Relief',
            'category-antibiotics': 'Antibiotics',
            'category-vitamins': 'Vitamins',
            'category-cold': 'Cold & Flu',
            'category-digestive': 'Digestive',
            'sort-name': 'Sort by Name',
            'sort-price': 'Sort by Price',
            'sort-stock': 'Sort by Stock',
            'no-medicines': 'No medicines found matching your criteria.',
            'doctor-title': 'Doctor Corner',
            'doctor-desc': 'Book appointments with our qualified doctors',
            'available-doctors': 'Available Doctors',
            'my-appointments': 'My Appointments',
            'book-appointment': 'Book Appointment',
            'label-doctor': 'Doctor',
            'label-date': 'Date',
            'label-time': 'Time Slot',
            'label-reason': 'Reason for Visit',
            'select-time': 'Select time slot',
            'slot-9am': '9:00 AM - 10:00 AM',
            'slot-10am': '10:00 AM - 11:00 AM',
            'slot-11am': '11:00 AM - 12:00 PM',
            'slot-2pm': '2:00 PM - 3:00 PM',
            'slot-3pm': '3:00 PM - 4:00 PM',
            'slot-4pm': '4:00 PM - 5:00 PM',
            'btn-cancel': 'Cancel',
            'btn-book': 'Book Appointment',
            'admin-title': 'Admin Panel',
            'admin-desc': 'Manage medicines, doctors, and appointments',
            'stat-medicines': 'Total Medicines',
            'stat-doctors': 'Total Doctors',
            'stat-appointments': "Today's Appointments",
            'stat-customers': 'Total Customers',
            'tab-medicines': 'Medicines',
            'tab-doctors': 'Doctors',
            'tab-appointments': 'Appointments',
            'manage-medicines': 'Manage Medicines',
            'manage-doctors': 'Manage Doctors',
            'manage-appointments': 'Manage Appointments',
            'btn-add-medicine': 'Add Medicine',
            'btn-add-doctor': 'Add Doctor',
            'add-medicine': 'Add Medicine',
            'add-doctor': 'Add Doctor',
            'label-category': 'Category',
            'label-price': 'Price (৳)',
            'label-stock': 'Stock Quantity',
            'label-description': 'Description',
            'label-specialization': 'Specialization',
            'label-experience': 'Experience (Years)',
            'label-photo': 'Photo (Base64)',
            'label-bio': 'Bio',
            'btn-save': 'Save',
            'btn-update': 'Update',
            'btn-delete': 'Delete',
            'btn-edit': 'Edit',
            'profile-title': 'My Profile',
            'profile-desc': 'Manage your account information and preferences',
            'profile-info': 'Profile Information',
            'btn-update-profile': 'Update Profile',
            'settings': 'Settings',
            'label-language': 'Language',
            'lang-english': 'English',
            'lang-bangla': 'বাংলা',
            'account-actions': 'Account Actions',
            'btn-change-password': 'Change Password',
            'btn-delete-account': 'Delete Account',
            'change-password': 'Change Password',
            'label-current-password': 'Current Password',
            'label-new-password': 'New Password',
            'btn-update': 'Update'
        },
        bn: {
            'app-title': 'ফার্মাকিউর',
            'nav-home': 'হোম',
            'nav-medicine': 'ঔষধ কোণ',
            'nav-doctor': 'ডাক্তার কোণ',
            'nav-profile': 'প্রোফাইল',
            'btn-logout': 'লগআউট',
            'welcome-title': 'ফার্মাকিউরে স্বাগতম',
            'welcome-desc': 'মানসম্পন্ন ঔষধ ও স্বাস্থ্যসেবার জন্য আপনার বিশ্বস্ত ফার্মেসি',
            'action-medicine': 'ঔষধ ব্রাউজ করুন',
            'action-medicine-desc': 'ঔষধ খুঁজুন এবং অর্ডার করুন',
            'action-doctor': 'অ্যাপয়েন্টমেন্ট বুক করুন',
            'action-doctor-desc': 'আমাদের ডাক্তারদের সাথে সময় নির্ধারণ করুন',
            'action-profile': 'আমার প্রোফাইল',
            'action-profile-desc': 'আপনার অ্যাকাউন্ট পরিচালনা করুন',
            'recent-activity': 'সাম্প্রতিক কার্যক্রম',
            'no-activity': 'কোন সাম্প্রতিক কার্যক্রম নেই',
            'footer-text': '© ২০২৪ ফার্মাকিউর। সকল অধিকার সংরক্ষিত।',
            'login-title': 'আপনার অ্যাকাউন্টে লগইন করুন',
            'signup-title': 'আপনার অ্যাকাউন্ট তৈরি করুন',
            'label-name': 'পূর্ণ নাম',
            'label-phone': 'ফোন নম্বর',
            'label-password': 'পাসওয়ার্ড',
            'label-confirm-password': 'পাসওয়ার্ড নিশ্চিত করুন',
            'label-age': 'বয়স',
            'label-address': 'ঠিকানা',
            'btn-login': 'লগইন',
            'btn-signup': 'সাইন আপ',
            'no-account': 'অ্যাকাউন্ট নেই?',
            'have-account': 'ইতিমধ্যে অ্যাকাউন্ট আছে?',
            'link-signup': 'এখানে সাইন আপ করুন',
            'link-login': 'এখানে লগইন করুন',
            'demo-title': 'ডেমো ক্রেডেনশিয়াল',
            'demo-admin': 'অ্যাডমিন:',
            'demo-customer': 'গ্রাহক:',
            'demo-customer-desc': 'অ্যাকাউন্ট তৈরি করুন বা যেকোনো ফোন/পাসওয়ার্ড ব্যবহার করুন',
            'medicine-title': 'ঔষধ কোণ',
            'medicine-desc': 'ঔষধ ব্রাউজ এবং অনুসন্ধান করুন',
            'search-placeholder': 'ঔষধ অনুসন্ধান করুন...',
            'btn-search': 'অনুসন্ধান',
            'filter-all-categories': 'সব ক্যাটাগরি',
            'category-pain': 'ব্যথা উপশম',
            'category-antibiotics': 'অ্যান্টিবায়োটিক',
            'category-vitamins': 'ভিটামিন',
            'category-cold': 'সর্দি ও জ্বর',
            'category-digestive': 'পাচনতন্ত্র',
            'sort-name': 'নাম অনুযায়ী সাজান',
            'sort-price': 'দাম অনুযায়ী সাজান',
            'sort-stock': 'স্টক অনুযায়ী সাজান',
            'no-medicines': 'আপনার মানদণ্ডের সাথে মিলে যাওয়া কোন ঔষধ পাওয়া যায়নি।',
            'doctor-title': 'ডাক্তার কোণ',
            'doctor-desc': 'আমাদের যোগ্য ডাক্তারদের সাথে অ্যাপয়েন্টমেন্ট বুক করুন',
            'available-doctors': 'উপলব্ধ ডাক্তার',
            'my-appointments': 'আমার অ্যাপয়েন্টমেন্ট',
            'book-appointment': 'অ্যাপয়েন্টমেন্ট বুক করুন',
            'label-doctor': 'ডাক্তার',
            'label-date': 'তারিখ',
            'label-time': 'সময় স্লট',
            'label-reason': 'পরিদর্শনের কারণ',
            'select-time': 'সময় স্লট নির্বাচন করুন',
            'slot-9am': 'সকাল ৯:০০ - ১০:০০',
            'slot-10am': 'সকাল ১০:০০ - ১১:০০',
            'slot-11am': 'সকাল ১১:০০ - দুপুর ১২:০০',
            'slot-2pm': 'বিকাল ২:০০ - ৩:০০',
            'slot-3pm': 'বিকাল ৩:০০ - ৪:০০',
            'slot-4pm': 'বিকাল ৪:০০ - ৫:০০',
            'btn-cancel': 'বাতিল',
            'btn-book': 'অ্যাপয়েন্টমেন্ট বুক করুন',
            'admin-title': 'অ্যাডমিন প্যানেল',
            'admin-desc': 'ঔষধ, ডাক্তার এবং অ্যাপয়েন্টমেন্ট পরিচালনা করুন',
            'stat-medicines': 'মোট ঔষধ',
            'stat-doctors': 'মোট ডাক্তার',
            'stat-appointments': 'আজকের অ্যাপয়েন্টমেন্ট',
            'stat-customers': 'মোট গ্রাহক',
            'tab-medicines': 'ঔষধ',
            'tab-doctors': 'ডাক্তার',
            'tab-appointments': 'অ্যাপয়েন্টমেন্ট',
            'manage-medicines': 'ঔষধ পরিচালনা',
            'manage-doctors': 'ডাক্তার পরিচালনা',
            'manage-appointments': 'অ্যাপয়েন্টমেন্ট পরিচালনা',
            'btn-add-medicine': 'ঔষধ যোগ করুন',
            'btn-add-doctor': 'ডাক্তার যোগ করুন',
            'add-medicine': 'ঔষধ যোগ করুন',
            'add-doctor': 'ডাক্তার যোগ করুন',
            'label-category': 'ক্যাটাগরি',
            'label-price': 'দাম (৳)',
            'label-stock': 'স্টক পরিমাণ',
            'label-description': 'বিবরণ',
            'label-specialization': 'বিশেষজ্ঞতা',
            'label-experience': 'অভিজ্ঞতা (বছর)',
            'label-photo': 'ফটো (Base64)',
            'label-bio': 'জীবনবৃত্তান্ত',
            'btn-save': 'সংরক্ষণ',
            'btn-update': 'আপডেট',
            'btn-delete': 'মুছে ফেলুন',
            'btn-edit': 'সম্পাদনা',
            'profile-title': 'আমার প্রোফাইল',
            'profile-desc': 'আপনার অ্যাকাউন্ট তথ্য এবং পছন্দসমূহ পরিচালনা করুন',
            'profile-info': 'প্রোফাইল তথ্য',
            'btn-update-profile': 'প্রোফাইল আপডেট করুন',
            'settings': 'সেটিংস',
            'label-language': 'ভাষা',
            'lang-english': 'English',
            'lang-bangla': 'বাংলা',
            'account-actions': 'অ্যাকাউন্ট কার্যক্রম',
            'btn-change-password': 'পাসওয়ার্ড পরিবর্তন',
            'btn-delete-account': 'অ্যাকাউন্ট মুছে ফেলুন',
            'change-password': 'পাসওয়ার্ড পরিবর্তন',
            'label-current-password': 'বর্তমান পাসওয়ার্ড',
            'label-new-password': 'নতুন পাসওয়ার্ড',
            'btn-update': 'আপডেট'
        }
    },

    init() {
        const settings = utils.getFromStorage('settings', { language: 'en' });
        this.currentLang = settings.language;
        this.updatePageLanguage();
    },

    setLanguage(lang) {
        this.currentLang = lang;
        const settings = utils.getFromStorage('settings', {});
        settings.language = lang;
        utils.saveToStorage('settings', settings);
        this.updatePageLanguage();
    },

    updatePageLanguage() {
        const elements = document.querySelectorAll('[data-lang]');
        elements.forEach(element => {
            const key = element.getAttribute('data-lang');
            const translation = this.translations[this.currentLang][key];
            if (translation) {
                element.textContent = translation;
            }
        });

        // Update placeholders
        const placeholderElements = document.querySelectorAll('[data-lang-placeholder]');
        placeholderElements.forEach(element => {
            const key = element.getAttribute('data-lang-placeholder');
            const translation = this.translations[this.currentLang][key];
            if (translation) {
                element.placeholder = translation;
            }
        });
    },

    getText(key) {
        return this.translations[this.currentLang][key] || key;
    }
};
